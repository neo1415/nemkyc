/**
 * Custom styles for Driver.js broker tour
 * Matches NEM Insurance branding
 */

/* Override Driver.js default colors with NEM burgundy */
.driver-popover {
  background: rgba(255, 255, 255, 0.98) !important; /* Slightly transparent */
  border: 2px solid #800020;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(128, 0, 32, 0.3);
  max-width: 240px !important; /* Even smaller - was 280px */
  z-index: 10000 !important;
  pointer-events: auto !important;
  backdrop-filter: blur(2px); /* Blur background slightly */
  padding: 12px !important; /* Reduce internal padding */
}

/* Reduce spacing in popover body */
.driver-popover-description-wrapper {
  padding: 0 !important;
  margin: 0 !important;
}

/* Reduce spacing in footer */
.driver-popover-footer {
  padding-top: 8px !important;
  margin-top: 8px !important;
  gap: 6px !important; /* Reduce gap between buttons */
}

/* Ensure popover arrow is visible */
.driver-popover-arrow {
  border-color: #800020 !important;
  z-index: 10001 !important;
}

.driver-popover-title {
  color: #800020;
  font-size: 14px !important; /* Smaller - was 16px */
  font-weight: 600;
  margin-bottom: 4px !important; /* Tighter spacing */
  line-height: 1.3 !important;
}

.driver-popover-description {
  color: #333;
  font-size: 12px !important; /* Smaller - was 13px */
  line-height: 1.4 !important; /* Tighter line height */
  margin-bottom: 8px !important;
}

.driver-popover-progress-text {
  color: #666;
  font-size: 10px !important; /* Even smaller - was 11px */
  margin-bottom: 6px !important;
}

/* Next button - burgundy */
.driver-popover-next-btn {
  background-color: #800020 !important;
  color: white !important;
  border: none !important;
  padding: 5px 10px !important; /* Smaller - was 6px 12px */
  border-radius: 4px !important;
  font-weight: 500 !important;
  font-size: 12px !important; /* Smaller - was 13px */
  cursor: pointer !important;
  transition: background-color 0.2s !important;
}

.driver-popover-next-btn:hover {
  background-color: #600018 !important;
}

/* Previous button - outline */
.driver-popover-prev-btn {
  background-color: transparent !important;
  color: #800020 !important;
  border: 1px solid #800020 !important;
  padding: 5px 10px !important; /* Smaller - was 6px 12px */
  border-radius: 4px !important;
  font-weight: 500 !important;
  font-size: 12px !important; /* Smaller - was 13px */
  cursor: pointer !important;
  transition: all 0.2s !important;
}

.driver-popover-prev-btn:hover {
  background-color: #f5f5f5 !important;
}

/* Close/Skip button - Make it BIGGER and more obvious */
.driver-popover-close-btn {
  color: #d32f2f !important; /* Red color to indicate "stop" */
  font-size: 13px !important; /* Bigger - was 10px */
  font-weight: 600 !important; /* Bold */
  text-decoration: none !important; /* No underline */
  background: #ffebee !important; /* Light red background */
  border: 1px solid #d32f2f !important; /* Red border */
  border-radius: 4px !important;
  cursor: pointer !important;
  padding: 6px 12px !important; /* Bigger padding - was 2px 4px */
  transition: all 0.2s !important;
}

.driver-popover-close-btn:hover {
  background: #d32f2f !important; /* Solid red on hover */
  color: white !important;
}

/* Hide the default Driver.js close icon (small X in corner) */
.driver-popover .driver-popover-close-only-btn {
  display: none !important;
}

/* Make close button text clearer - only show text, no icon */
.driver-popover-close-btn::before {
  content: '' !important; /* Remove the X icon we added */
}

/* Style the "Done" button on final step */
.driver-popover-done-btn {
  background-color: #800020 !important;
  color: white !important;
  border: none !important;
  padding: 8px 16px !important;
  border-radius: 4px !important;
  font-weight: 600 !important;
  font-size: 14px !important;
  cursor: pointer !important;
  transition: background-color 0.2s !important;
}

.driver-popover-done-btn:hover {
  background-color: #600018 !important;
}

/* Overlay - COMPLETELY INVISIBLE, NEVER BLOCKS CLICKS */
.driver-overlay {
  display: none !important; /* Hide overlay completely */
}

/* Alternative if display:none breaks Driver.js - make it truly invisible */
body.driver-active .driver-overlay {
  background-color: transparent !important;
  opacity: 0 !important;
  pointer-events: none !important;
  z-index: -1 !important; /* Behind everything */
  visibility: hidden !important; /* Extra insurance */
}

/* Highlighted element - subtle outline, fully interactive */
.driver-active-element {
  outline: 3px solid #800020 !important;
  outline-offset: 4px !important;
  z-index: auto !important; /* Don't change z-index */
  pointer-events: auto !important;
  position: relative !important;
  box-shadow: 0 0 0 6px rgba(128, 0, 32, 0.1) !important; /* Very subtle glow */
  background-color: transparent !important; /* No background change */
}

/* Special positioning for the select-entries step */
[data-tour="select-entries"].driver-active-element {
  outline-offset: 2px !important; /* Tighter outline for the grid */
}

/* Ensure ALL children of highlighted element are interactive */
.driver-active-element,
.driver-active-element *,
.driver-active-element input,
.driver-active-element button,
.driver-active-element textarea,
.driver-active-element select {
  pointer-events: auto !important;
}

/* Ensure the ENTIRE PAGE is interactive during tour */
body.driver-active,
body.driver-active *,
.MuiDataGrid-root,
.MuiDataGrid-root *,
.MuiPaper-root,
.MuiPaper-root * {
  pointer-events: auto !important;
}

/* Ensure MUI Dialog and its contents work during tour */
.MuiDialog-root,
.MuiDialog-container,
.MuiDialog-paper,
.MuiDialog-paper *,
.MuiBackdrop-root {
  pointer-events: auto !important;
}

/* Ensure body can scroll during tour */
body.driver-active {
  overflow: auto !important;
}

/* Ensure dialog content can scroll */
.MuiDialogContent-root {
  overflow-y: auto !important;
}

/* Ensure highlighted element can scroll if needed */
.driver-active-element {
  overflow: visible !important;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .driver-popover {
    max-width: calc(100vw - 40px);
    margin: 10px;
    font-size: 14px;
  }
  
  .driver-popover-title {
    font-size: 16px;
  }
  
  .driver-popover-description {
    font-size: 13px;
  }
  
  .driver-popover-next-btn,
  .driver-popover-prev-btn {
    padding: 10px 14px !important;
    font-size: 14px !important;
  }
}

/* Extra small mobile screens */
@media (max-width: 480px) {
  .driver-popover {
    max-width: calc(100vw - 20px);
    margin: 10px;
  }
  
  .driver-popover-title {
    font-size: 15px;
  }
  
  .driver-popover-description {
    font-size: 12px;
  }
  
  .driver-popover-progress-text {
    font-size: 11px;
  }
  
  .driver-popover-next-btn,
  .driver-popover-prev-btn {
    padding: 8px 12px !important;
    font-size: 13px !important;
  }
}

/* Tablet landscape */
@media (min-width: 769px) and (max-width: 1024px) {
  .driver-popover {
    max-width: 400px;
  }
}
